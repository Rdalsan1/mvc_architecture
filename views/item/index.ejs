<%- include('../partials/header') %>

<main>
  <h1>All Items</h1>

  <div class="items-container">
    <% items.forEach(item => { %> 
      <div class="item-card">
        <a href="/items/<%= item._id %>">
          <img height="400px" src="/images/uploads/<%= item.image %>" alt="<%= item.title %>">
        </a>
        <h2><%= item.title %></h2>
        <p><strong>Name:</strong> <%= item.name %></p>
        <p><strong>Condition:</strong> <%= item.condition %></p>
        <p><strong>Price:</strong> $<%= item.price %></p>
        <p><strong>Details:</strong> <%= item.details %></p>
        <p><strong>Active:</strong> <%= item.active ? 'Yes' : 'No' %></p>
        <p><strong>Total Offers:</strong> <%= item.totalOffers %></p>
        <a href="/items/<%= item._id %>" class="btn btn-view">View</a>
        <a href="/items/<%= item._id %>/offers" class="btn btn-secondary">View Offers</a>
        <a href="/items/<%= item._id %>/edit" class="btn btn-edit">Edit</a>
        <form action="/items/<%= item._id %>?_method=DELETE" method="POST">
          <button type="submit" class="btn btn-danger">Delete</button>
        </form>
        <form action="/items/<%= item._id %>/offers" method="POST" class="mt-2">
          <div class="form-group">
            <input 
              type="number" 
              name="amount" 
              min="0.01" 
              step="0.01" 
              required 
              placeholder="Your offer $" 
              class="form-control mb-1" 
              style="max-width: 150px;">
          </div>
          <button type="submit" class="btn btn-success btn-sm">Make an Offer</button>
        </form>
      </div>
    <% }); %> 
  </div>
</main>

<%- include('../partials/footer') %>
